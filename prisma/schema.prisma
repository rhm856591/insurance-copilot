generator client {
  provider = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  extensions = [vector]
}

model Policy {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  policyName        String   @map("policy_name")
  policyType        String   @map("policy_type")
  description       String?
  benefits          String[]
  premiumRange      String?  @map("premium_range")
  coverageAmount    String?  @map("coverage_amount")
  termYears         String?  @map("term_years")
  taxBenefits       String?  @map("tax_benefits")
  ridersAvailable   String[] @map("riders_available")
  createdAt         DateTime @default(now()) @map("created_at")

  @@map("policies")
}

model Customer {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name      String
  email     String?  @unique
  phone     String?  @unique
  age       Int?
  policies  String[]
  createdAt DateTime @default(now()) @map("created_at")

  @@map("customers")
}

model PremiumTable {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  policyType      String   @map("policy_type")
  ageGroup        String   @map("age_group")
  coverageAmount  BigInt   @map("coverage_amount")
  termYears       Int      @map("term_years")
  monthlyPremium  Decimal  @map("monthly_premium") @db.Decimal(10, 2)
  annualPremium   Decimal  @map("annual_premium") @db.Decimal(10, 2)
  createdAt       DateTime @default(now()) @map("created_at")

  @@map("premium_tables")
}

model KnowledgeBase {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  content   String
  metadata  Json?
  embedding Unsupported("vector(768)")?
  createdAt DateTime @default(now()) @map("created_at")

  @@map("knowledge_base")
}
